# HyeniMC ë°°í¬ ì‹œìŠ¤í…œ êµ¬ì¡°

## ê°œìš”

HyeniMCëŠ” **í•˜ì´ë¸Œë¦¬ë“œ ë°°í¬ ë°©ì‹**ì„ ì‚¬ìš©í•©ë‹ˆë‹¤:
- **ëŸ°ì²˜ (HyeniMC)**: GitHub Releases (Public)
- **ì „ìš© ëª¨ë“œ (HyeniHelper)**: Cloudflare R2 (Private)

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ì‚¬ìš©ì                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ 1. ëŸ°ì²˜ ë‹¤ìš´ë¡œë“œ
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              GitHub Releases (Public)                        â”‚
â”‚  https://github.com/hyeniworld/HyeniMC/releases             â”‚
â”‚                                                              â”‚
â”‚  âœ… ëŸ°ì²˜ ì„¤ì¹˜ íŒŒì¼ (.exe, .dmg)                              â”‚
â”‚  âœ… ìë™ ì—…ë°ì´íŠ¸ ë©”íƒ€ë°ì´í„° (latest.yml)                    â”‚
â”‚  âœ… ì†ŒìŠ¤ì½”ë“œ ê³µê°œ (ì‹ ë¢°ì„± â†‘)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ 2. ì¸ì¦ (Discord Bot)
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          hyenimc://auth?token={USER_TOKEN}                   â”‚
â”‚                                                              â”‚
â”‚  â†’ Config íŒŒì¼ ìƒì„±: hyenihelper-config.json                â”‚
â”‚  â†’ í† í° ì €ì¥                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ 3. ëª¨ë“œ ì—…ë°ì´íŠ¸ ì²´í¬ (ì¸ì¦ë¨)
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Cloudflare Worker API (Public Endpoint)                â”‚
â”‚       https://releases.hyenimc.com                           â”‚
â”‚                                                              â”‚
â”‚  GET /api/hyenihelper/latest                                 â”‚
â”‚    â†’ Returns: { version, downloadUrl, sha256, ... }          â”‚
â”‚                                                              â”‚
â”‚  GET /download/hyenihelper/{version}/{file}?token={TOKEN}    â”‚
â”‚    â†’ Validates token                                         â”‚
â”‚    â†’ Returns: JAR file from R2                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ Token ê²€ì¦ í›„ ë‹¤ìš´ë¡œë“œ
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Cloudflare R2 Bucket (Private)                      â”‚
â”‚          hyenimc-releases                                    â”‚
â”‚                                                              â”‚
â”‚  hyenihelper/                                                â”‚
â”‚    â”œâ”€â”€ 1.0.0/                                                â”‚
â”‚    â”‚   â”œâ”€â”€ hyenihelper-fabric-1.21.1-1.0.0.jar              â”‚
â”‚    â”‚   â”œâ”€â”€ hyenihelper-neoforge-1.21.1-1.0.0.jar            â”‚
â”‚    â”‚   â””â”€â”€ manifest.json                                    â”‚
â”‚    â”œâ”€â”€ 1.0.1/                                                â”‚
â”‚    â”‚   â””â”€â”€ ...                                               â”‚
â”‚    â””â”€â”€ latest.json                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ íŒŒì¼ êµ¬ì¡°

### GitHub Releases (Public)

```
HyeniMC Repository
â”œâ”€â”€ releases/
â”‚   â”œâ”€â”€ v0.1.0/
â”‚   â”‚   â”œâ”€â”€ HyeniMC-Setup-0.1.0.exe        (Windows ì„¤ì¹˜ íŒŒì¼)
â”‚   â”‚   â”œâ”€â”€ HyeniMC-0.1.0.dmg              (macOS ì„¤ì¹˜ íŒŒì¼)
â”‚   â”‚   â”œâ”€â”€ HyeniMC-0.1.0.AppImage         (Linux ì„¤ì¹˜ íŒŒì¼)
â”‚   â”‚   â””â”€â”€ latest.yml                     (electron-updater ë©”íƒ€ë°ì´í„°)
â”‚   â””â”€â”€ v0.1.1/
â”‚       â””â”€â”€ ...
```

**ë‹¤ìš´ë¡œë“œ URL ì˜ˆì‹œ:**
```
https://github.com/hyeniworld/HyeniMC/releases/download/v0.1.0/HyeniMC-Setup-0.1.0.exe
```

---

### Cloudflare R2 (Private)

```
R2 Bucket: hyenimc-releases
â”œâ”€â”€ hyenihelper/
â”‚   â”œâ”€â”€ 1.0.0/
â”‚   â”‚   â”œâ”€â”€ hyenihelper-fabric-1.21.1-1.0.0.jar
â”‚   â”‚   â”œâ”€â”€ hyenihelper-neoforge-1.21.1-1.0.0.jar
â”‚   â”‚   â””â”€â”€ manifest.json
â”‚   â”œâ”€â”€ 1.0.1/
â”‚   â”‚   â”œâ”€â”€ hyenihelper-fabric-1.21.1-1.0.1.jar
â”‚   â”‚   â”œâ”€â”€ hyenihelper-neoforge-1.21.1-1.0.1.jar
â”‚   â”‚   â””â”€â”€ manifest.json
â”‚   â””â”€â”€ latest.json
```

#### latest.json
```json
{
  "version": "1.0.1",
  "releaseDate": "2025-10-13T00:00:00Z",
  "minLauncherVersion": "0.1.0",
  "gameVersions": ["1.21.1"],
  "changelog": "ë²„ê·¸ ìˆ˜ì • ë° ì„±ëŠ¥ ê°œì„ "
}
```

#### manifest.json (ê° ë²„ì „ë³„)
```json
{
  "version": "1.0.1",
  "gameVersion": "1.21.1",
  "loaders": {
    "fabric": {
      "fileName": "hyenihelper-fabric-1.21.1-1.0.1.jar",
      "sha256": "abc123...",
      "size": 1234567,
      "downloadPath": "hyenihelper/1.0.1/hyenihelper-fabric-1.21.1-1.0.1.jar"
    },
    "neoforge": {
      "fileName": "hyenihelper-neoforge-1.21.1-1.0.1.jar",
      "sha256": "def456...",
      "size": 1234567,
      "downloadPath": "hyenihelper/1.0.1/hyenihelper-neoforge-1.21.1-1.0.1.jar"
    }
  },
  "changelog": "ë²„ê·¸ ìˆ˜ì • ë° ì„±ëŠ¥ ê°œì„ ",
  "required": false
}
```

---

## ğŸ” ì¸ì¦ íë¦„

### 1. ì‚¬ìš©ì ì¸ì¦
```
Discord Bot â†’ /ì¸ì¦ ëª…ë ¹ì–´ â†’ ë²„íŠ¼ í´ë¦­
  â†“
hyenimc://auth?token={USER_TOKEN}&server=play.hyeniworld.com
  â†“
ëŸ°ì²˜: config/hyenihelper-config.json ìƒì„±
{
  "token": "user-specific-token",
  "enabled": true,
  ...
}
```

### 2. ì—…ë°ì´íŠ¸ ì²´í¬ (ì¸ì¦ ë¶ˆí•„ìš”)
```
ëŸ°ì²˜ â†’ GET https://releases.hyenimc.com/api/hyenihelper/latest
  â†“
{
  "version": "1.0.1",
  "changelog": "...",
  ...
}
```

### 3. ë‹¤ìš´ë¡œë“œ (ì¸ì¦ í•„ìš”)
```
ëŸ°ì²˜ â†’ GET https://releases.hyenimc.com/download/hyenihelper/1.0.1/hyenihelper-neoforge-1.21.1-1.0.1.jar?token={USER_TOKEN}
  â†“
Worker: í† í° ê²€ì¦ (configì—ì„œ ì½ìŒ)
  â†“
ìœ íš¨í•˜ë©´: R2ì—ì„œ íŒŒì¼ ìŠ¤íŠ¸ë¦¬ë°
ë¬´íš¨í•˜ë©´: 401 Unauthorized
```

---

## ğŸŒ Cloudflare Worker API

### ì—”ë“œí¬ì¸íŠ¸

#### 1. ìµœì‹  ë²„ì „ ì¡°íšŒ
```
GET /api/hyenihelper/latest
```

**ì‘ë‹µ:**
```json
{
  "version": "1.0.1",
  "releaseDate": "2025-10-13T00:00:00Z",
  "minLauncherVersion": "0.1.0",
  "gameVersions": ["1.21.1"],
  "changelog": "ë²„ê·¸ ìˆ˜ì • ë° ì„±ëŠ¥ ê°œì„ ",
  "loaders": {
    "fabric": {
      "downloadUrl": "/download/hyenihelper/1.0.1/hyenihelper-fabric-1.21.1-1.0.1.jar",
      "sha256": "abc123...",
      "size": 1234567
    },
    "neoforge": {
      "downloadUrl": "/download/hyenihelper/1.0.1/hyenihelper-neoforge-1.21.1-1.0.1.jar",
      "sha256": "def456...",
      "size": 1234567
    }
  }
}
```

#### 2. ë²„ì „ ëª©ë¡ ì¡°íšŒ
```
GET /api/hyenihelper/versions
```

**ì‘ë‹µ:**
```json
{
  "versions": [
    {
      "version": "1.0.1",
      "releaseDate": "2025-10-13T00:00:00Z",
      "gameVersions": ["1.21.1"]
    },
    {
      "version": "1.0.0",
      "releaseDate": "2025-10-10T00:00:00Z",
      "gameVersions": ["1.21.1"]
    }
  ]
}
```

#### 3. íŒŒì¼ ë‹¤ìš´ë¡œë“œ (ì¸ì¦ í•„ìš”)
```
GET /download/hyenihelper/{version}/{fileName}?token={USER_TOKEN}
```

**í—¤ë”:**
```
Authorization: Bearer {USER_TOKEN}
```

**ì‘ë‹µ:**
- ì„±ê³µ: JAR íŒŒì¼ ë°”ì´ë„ˆë¦¬
- ì‹¤íŒ¨: 401 Unauthorized

---

## ğŸ”§ ëŸ°ì²˜ êµ¬í˜„

### HyeniHelper ì—…ë°ì´íŠ¸ ì²´í¬

```typescript
// src/main/services/hyeni-updater.ts

interface HyeniHelperUpdate {
  available: boolean;
  currentVersion: string;
  latestVersion: string;
  downloadUrl: string;
  sha256: string;
  size: number;
  changelog: string;
  required: boolean;
}

export class HyeniUpdater {
  private apiUrl = 'https://releases.hyenimc.com/api';
  
  async checkHyeniHelperUpdate(
    profileId: string,
    gameVersion: string,
    loaderType: string
  ): Promise<HyeniHelperUpdate | null> {
    // 1. ë¡œì»¬ ë²„ì „ í™•ì¸
    const localVersion = await this.getLocalVersion(profileId);
    
    // 2. ìµœì‹  ë²„ì „ ì¡°íšŒ
    const response = await fetch(`${this.apiUrl}/hyenihelper/latest`);
    const latest = await response.json();
    
    // 3. ë²„ì „ ë¹„êµ
    if (this.isNewerVersion(latest.version, localVersion)) {
      const loaderInfo = latest.loaders[loaderType];
      
      return {
        available: true,
        currentVersion: localVersion,
        latestVersion: latest.version,
        downloadUrl: loaderInfo.downloadUrl,
        sha256: loaderInfo.sha256,
        size: loaderInfo.size,
        changelog: latest.changelog,
        required: latest.required || false
      };
    }
    
    return null;
  }
  
  async installUpdate(
    profileId: string,
    update: HyeniHelperUpdate
  ): Promise<void> {
    // 1. í† í° ì½ê¸°
    const token = await this.getUserToken(profileId);
    if (!token) {
      throw new Error('ì¸ì¦ í† í°ì´ ì—†ìŠµë‹ˆë‹¤. /ì¸ì¦ ëª…ë ¹ì–´ë¡œ ì¸ì¦í•˜ì„¸ìš”.');
    }
    
    // 2. ë‹¤ìš´ë¡œë“œ
    const downloadUrl = `https://releases.hyenimc.com${update.downloadUrl}?token=${token}`;
    const tempPath = await this.downloadFile(downloadUrl, update.sha256);
    
    // 3. ê¸°ì¡´ íŒŒì¼ ë°±ì—…
    const modsDir = path.join(getProfilePath(profileId), 'mods');
    const oldFiles = await this.findHyeniHelperFiles(modsDir);
    
    for (const file of oldFiles) {
      await fs.rename(file, `${file}.backup`);
    }
    
    // 4. ìƒˆ íŒŒì¼ ì„¤ì¹˜
    const fileName = path.basename(update.downloadUrl);
    await fs.copyFile(tempPath, path.join(modsDir, fileName));
    
    // 5. ë°±ì—… ì‚­ì œ
    for (const file of oldFiles) {
      await fs.remove(`${file}.backup`);
    }
  }
  
  private async getUserToken(profileId: string): Promise<string | null> {
    const configPath = path.join(
      getProfilePath(profileId),
      'config',
      'hyenihelper-config.json'
    );
    
    if (await fs.pathExists(configPath)) {
      const config = await fs.readJSON(configPath);
      return config.token || null;
    }
    
    return null;
  }
}
```

---

## ğŸ“¤ ì—…ë¡œë“œ ì›Œí¬í”Œë¡œìš°

### HyeniHelper JAR ì—…ë¡œë“œ (ìˆ˜ë™/ìë™)

```bash
# Wrangler CLI ì„¤ì¹˜
npm install -g wrangler

# R2ì— ì—…ë¡œë“œ
wrangler r2 object put hyenimc-releases/hyenihelper/1.0.1/hyenihelper-neoforge-1.21.1-1.0.1.jar \
  --file ./build/hyenihelper-neoforge-1.21.1-1.0.1.jar

# manifest.json ì—…ë¡œë“œ
wrangler r2 object put hyenimc-releases/hyenihelper/1.0.1/manifest.json \
  --file ./manifests/1.0.1.json

# latest.json ì—…ë°ì´íŠ¸
wrangler r2 object put hyenimc-releases/hyenihelper/latest.json \
  --file ./manifests/latest.json
```

### GitHub Actions (ìë™í™”)

```yaml
# .github/workflows/release-hyenihelper.yml
name: Release HyeniHelper

on:
  workflow_dispatch:
    inputs:
      version:
        description: 'Version (e.g., 1.0.1)'
        required: true
      gameVersion:
        description: 'Game Version (e.g., 1.21.1)'
        required: true

jobs:
  upload:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Build
        run: ./gradlew build
      
      - name: Generate SHA256
        run: |
          sha256sum build/libs/*.jar > checksums.txt
      
      - name: Install Wrangler
        run: npm install -g wrangler
      
      - name: Upload to R2
        env:
          CLOUDFLARE_API_TOKEN: ${{ secrets.CLOUDFLARE_API_TOKEN }}
          CLOUDFLARE_ACCOUNT_ID: ${{ secrets.CLOUDFLARE_ACCOUNT_ID }}
        run: |
          VERSION=${{ github.event.inputs.version }}
          GAME_VERSION=${{ github.event.inputs.gameVersion }}
          
          # Upload JARs
          wrangler r2 object put hyenimc-releases/hyenihelper/${VERSION}/hyenihelper-fabric-${GAME_VERSION}-${VERSION}.jar \
            --file build/libs/hyenihelper-fabric-${GAME_VERSION}-${VERSION}.jar
          
          wrangler r2 object put hyenimc-releases/hyenihelper/${VERSION}/hyenihelper-neoforge-${GAME_VERSION}-${VERSION}.jar \
            --file build/libs/hyenihelper-neoforge-${GAME_VERSION}-${VERSION}.jar
          
          # Upload manifest
          wrangler r2 object put hyenimc-releases/hyenihelper/${VERSION}/manifest.json \
            --file manifests/${VERSION}.json
          
          # Update latest.json
          wrangler r2 object put hyenimc-releases/hyenihelper/latest.json \
            --file manifests/latest.json
```

---

## ğŸ’° ë¹„ìš© ì˜ˆìƒ

### Cloudflare R2
- **ì €ì¥ ìš©ëŸ‰**: ì²« 10GB ë¬´ë£Œ, ì´í›„ $0.015/GB/ì›”
- **ë‹¤ìš´ë¡œë“œ**: Class A (write) $4.50/million, Class B (read) $0.36/million
- **ì˜ˆìƒ**: ì›” $1-3 (ì‚¬ìš©ì 100ëª… ê¸°ì¤€)

### GitHub
- **Public Repository**: ë¬´ë£Œ
- **Releases**: ë¬´ë£Œ
- **Actions**: ì›” 2,000ë¶„ ë¬´ë£Œ (ì¶©ë¶„í•¨)

**ì´ ì˜ˆìƒ ë¹„ìš©: ~$1-3/ì›”**

---

## ğŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### í† í° ê´€ë¦¬
- âœ… í† í°ì€ config íŒŒì¼ì— ì €ì¥ (ë¡œì»¬ë§Œ)
- âœ… HTTPSë§Œ ì‚¬ìš©
- âœ… í† í° ë§Œë£Œ ì§€ì› (ì„ íƒ)
- âœ… Rate limiting (Workerì—ì„œ)

### íŒŒì¼ ë¬´ê²°ì„±
- âœ… SHA256 ì²´í¬ì„¬ ê²€ì¦
- âœ… ì„œëª… ê²€ì¦ (ì„ íƒ)

### ì ‘ê·¼ ì œì–´
- âœ… R2 ë²„í‚· private
- âœ… Workerë¥¼ í†µí•´ì„œë§Œ ì ‘ê·¼
- âœ… í† í° ê²€ì¦ í•„ìˆ˜

---

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

1. âœ… ì‹œìŠ¤í…œ êµ¬ì¡° ë¬¸ì„œ ì‘ì„± (ì™„ë£Œ)
2. â­ï¸ Cloudflare Worker êµ¬í˜„
3. â­ï¸ ëŸ°ì²˜ ì—…ë°ì´íŠ¸ ì²´í¬ ì„œë¹„ìŠ¤ êµ¬í˜„
4. â­ï¸ UI ì»´í¬ë„ŒíŠ¸ ì¶”ê°€
5. â­ï¸ GitHub Actions ì„¤ì •
6. â­ï¸ í…ŒìŠ¤íŠ¸ ë° ë°°í¬

---

**ì‘ì„±ì¼**: 2025-10-13  
**ë²„ì „**: 1.0.0  
**ì‘ì„±ì**: HyeniMC Team
